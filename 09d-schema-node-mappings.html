<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema-to-Node Mappings - Dymesty AI Glasses</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #667eea;
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: #64748b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1e293b;
            --light: #f8fafc;
            --border: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--primary-gradient);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Control Panel */
        .control-panel {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-label {
            font-weight: 600;
            color: var(--text-secondary);
            margin-right: 0.5rem;
        }

        .control-btn {
            padding: 0.5rem 1rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: var(--text-primary);
        }

        .control-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .control-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .stat-change {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Chart Sections */
        .chart-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 1rem;
        }

        .chart-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .chart-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .chart-container {
            width: 100%;
            height: 600px;
        }

        .medium-chart {
            height: 400px;
        }

        /* Detail Tables */
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .detail-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        .detail-icon {
            width: 48px;
            height: 48px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .detail-title h3 {
            font-size: 1.4rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .detail-title p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Mapping Table */
        .mapping-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .mapping-table th {
            background: #f8fafc;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border);
        }

        .mapping-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .mapping-table tr:hover {
            background: #f8fafc;
        }

        .schema-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: #dbeafe;
            color: #1e40af;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .node-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: #d1fae5;
            color: #047857;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .strength-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .strength-fill {
            height: 100%;
            background: var(--primary-gradient);
            transition: width 0.5s ease;
        }

        /* Info Box */
        .info-box {
            background: #f0f9ff;
            border-left: 4px solid var(--info);
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .info-box h4 {
            color: var(--info);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .control-panel {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                flex-wrap: wrap;
                justify-content: center;
            }

            .detail-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>Schema-to-Node Mappings</h1>
        <p>Visualizing how structured data (JSON-LD schemas) connects to AI platform knowledge graphs for Dymesty AI Glasses</p>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Info Box -->
        <div class="info-box">
            <h4><i class="fas fa-info-circle"></i> What are Schema-Node Mappings?</h4>
            <p>Schema-Node mappings show how structured data markup (JSON-LD) on your website connects to knowledge graph nodes in AI platforms. This helps AI systems understand and accurately present information about Dymesty AI Glasses.</p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">24</div>
                <div class="stat-label">Active Schema Types</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> +4 this month
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">156</div>
                <div class="stat-label">Knowledge Graph Nodes</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> +18 connections
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">89%</div>
                <div class="stat-label">Mapping Accuracy</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> +5% improvement
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3.2s</div>
                <div class="stat-label">Avg. Processing Time</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-down"></i> -0.8s faster
                </div>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="control-group">
                <span class="control-label">Schema Focus:</span>
                <button class="control-btn active" onclick="updateSchemaView('all')">All Schemas</button>
                <button class="control-btn" onclick="updateSchemaView('product')">Product</button>
                <button class="control-btn" onclick="updateSchemaView('faq')">FAQPage</button>
                <button class="control-btn" onclick="updateSchemaView('howto')">HowTo</button>
                <button class="control-btn" onclick="updateSchemaView('review')">Review</button>
            </div>
            <div class="control-group">
                <span class="control-label">Time Range:</span>
                <button class="control-btn" onclick="updateTimeRange('week')">7 Days</button>
                <button class="control-btn active" onclick="updateTimeRange('month')">30 Days</button>
                <button class="control-btn" onclick="updateTimeRange('quarter')">90 Days</button>
            </div>
        </div>

        <!-- Main Knowledge Graph Visualization -->
        <div class="chart-section">
            <div class="chart-header">
                <div>
                    <h2 class="chart-title">Interactive Schema-to-Node Mapping</h2>
                    <p class="chart-subtitle">Click on nodes to explore connections between schemas and AI knowledge graphs</p>
                </div>
            </div>
            <div id="mainGraphChart" class="chart-container"></div>
        </div>

        <!-- Detailed Mapping Tables -->
        <div class="detail-grid">
            <!-- Product Schema Mappings -->
            <div class="detail-card">
                <div class="detail-header">
                    <div class="detail-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="detail-title">
                        <h3>Product Schema Mappings</h3>
                        <p>Core product information for Dymesty AI Glasses</p>
                    </div>
                </div>
                <table class="mapping-table">
                    <thead>
                        <tr>
                            <th>Schema Property</th>
                            <th>Knowledge Graph Node</th>
                            <th>Strength</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="schema-badge">Product.name</span></td>
                            <td><span class="node-badge">Dymesty AI Glasses Entity</span></td>
                            <td>
                                <strong>95%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 95%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">Product.description</span></td>
                            <td><span class="node-badge">Smart Glasses Features</span></td>
                            <td>
                                <strong>88%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 88%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">Product.offers.price</span></td>
                            <td><span class="node-badge">Price Comparison Node</span></td>
                            <td>
                                <strong>92%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 92%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">Product.aggregateRating</span></td>
                            <td><span class="node-badge">User Reviews & Ratings</span></td>
                            <td>
                                <strong>85%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 85%"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- FAQ Schema Mappings -->
            <div class="detail-card">
                <div class="detail-header">
                    <div class="detail-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="detail-title">
                        <h3>FAQPage Schema Mappings</h3>
                        <p>Frequently asked questions about features</p>
                    </div>
                </div>
                <table class="mapping-table">
                    <thead>
                        <tr>
                            <th>Schema Property</th>
                            <th>Knowledge Graph Node</th>
                            <th>Strength</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="schema-badge">FAQ: Real-time Translation</span></td>
                            <td><span class="node-badge">Translation Features</span></td>
                            <td>
                                <strong>90%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 90%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">FAQ: Privacy (No Camera)</span></td>
                            <td><span class="node-badge">Privacy & Security</span></td>
                            <td>
                                <strong>87%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 87%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">FAQ: 48-Hour Battery</span></td>
                            <td><span class="node-badge">Battery Performance</span></td>
                            <td>
                                <strong>93%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 93%"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="schema-badge">FAQ: AI Meeting Assistant</span></td>
                            <td><span class="node-badge">AI Features</span></td>
                            <td>
                                <strong>88%</strong>
                                <div class="strength-bar">
                                    <div class="strength-fill" style="width: 88%"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Performance Charts Grid -->
        <div class="detail-grid">
            <!-- Schema Coverage Chart -->
            <div class="chart-section">
                <div class="chart-header">
                    <div>
                        <h2 class="chart-title">Schema Coverage by AI Platform</h2>
                        <p class="chart-subtitle">How well each platform recognizes our schemas</p>
                    </div>
                </div>
                <div id="schemaCoverageChart" class="medium-chart"></div>
            </div>

            <!-- Connection Strength Heatmap -->
            <div class="chart-section">
                <div class="chart-header">
                    <div>
                        <h2 class="chart-title">Connection Strength Matrix</h2>
                        <p class="chart-subtitle">Schema-to-node connection effectiveness</p>
                    </div>
                </div>
                <div id="connectionHeatmapChart" class="medium-chart"></div>
            </div>
        </div>

        <!-- Impact Analysis -->
        <div class="chart-section">
            <div class="chart-header">
                <div>
                    <h2 class="chart-title">Schema Impact on AI Visibility</h2>
                    <p class="chart-subtitle">Correlation between schema implementation and AI platform performance</p>
                </div>
            </div>
            <div id="impactAnalysisChart" class="medium-chart"></div>
        </div>

        <!-- Schema Implementation Priority -->
        <div class="chart-section">
            <div class="chart-header">
                <div>
                    <h2 class="chart-title">Schema Implementation Roadmap</h2>
                    <p class="chart-subtitle">Priority and impact matrix for schema optimization</p>
                </div>
            </div>
            <div id="priorityMatrixChart" class="medium-chart"></div>
        </div>
    </div>

    <script>
        // Check authentication
        const authToken = localStorage.getItem('authToken');
        const sessionExpiry = localStorage.getItem('sessionExpiry');
        const currentTime = new Date().getTime();

        if (!authToken || !sessionExpiry || currentTime > parseInt(sessionExpiry)) {
            window.location.href = 'login.html';
        }

        let mainGraphChart, coverageChart, heatmapChart, impactChart, priorityChart;
        let currentSchemaView = 'all';
        let currentTimeRange = 'month';

        // Initialize main knowledge graph
        function initMainGraph() {
            const chartDom = document.getElementById('mainGraphChart');
            mainGraphChart = echarts.init(chartDom);

            const nodes = [
                // Core Entity
                { id: 'dymesty', name: 'Dymesty AI Glasses', category: 0, x: 400, y: 300, symbolSize: 100, 
                  itemStyle: { color: '#667eea' } },

                // Schema Layer (Left)
                { id: 'schema-product', name: 'Product Schema', category: 1, x: 100, y: 200, symbolSize: 70 },
                { id: 'schema-faq', name: 'FAQPage Schema', category: 1, x: 100, y: 300, symbolSize: 70 },
                { id: 'schema-howto', name: 'HowTo Schema', category: 1, x: 100, y: 400, symbolSize: 60 },
                { id: 'schema-review', name: 'Review Schema', category: 1, x: 150, y: 500, symbolSize: 60 },
                { id: 'schema-org', name: 'Organization Schema', category: 1, x: 200, y: 100, symbolSize: 50 },

                // Knowledge Graph Nodes (Right)
                { id: 'kg-features', name: 'Smart Glasses Features', category: 2, x: 700, y: 150, symbolSize: 80 },
                { id: 'kg-translation', name: 'Translation Technology', category: 2, x: 750, y: 250, symbolSize: 75 },
                { id: 'kg-privacy', name: 'Privacy & No Camera', category: 2, x: 700, y: 350, symbolSize: 70 },
                { id: 'kg-battery', name: '48-Hour Battery Life', category: 2, x: 750, y: 450, symbolSize: 65 },
                { id: 'kg-price', name: 'Price Comparison', category: 2, x: 650, y: 500, symbolSize: 60 },
                { id: 'kg-ai-assistant', name: 'AI Meeting Assistant', category: 2, x: 800, y: 200, symbolSize: 70 },
                { id: 'kg-titanium', name: '35g Titanium Design', category: 2, x: 800, y: 400, symbolSize: 65 },

                // AI Platform Nodes (Bottom)
                { id: 'ai-chatgpt', name: 'ChatGPT', category: 3, x: 200, y: 600, symbolSize: 50 },
                { id: 'ai-perplexity', name: 'Perplexity', category: 3, x: 350, y: 600, symbolSize: 50 },
                { id: 'ai-claude', name: 'Claude', category: 3, x: 500, y: 600, symbolSize: 50 },
                { id: 'ai-gemini', name: 'Gemini', category: 3, x: 650, y: 600, symbolSize: 50 }
            ];

            const edges = [
                // Schema to Core Entity
                { source: 'schema-product', target: 'dymesty', value: 10 },
                { source: 'schema-faq', target: 'dymesty', value: 9 },
                { source: 'schema-howto', target: 'dymesty', value: 7 },
                { source: 'schema-review', target: 'dymesty', value: 8 },
                { source: 'schema-org', target: 'dymesty', value: 6 },

                // Core Entity to Knowledge Graph
                { source: 'dymesty', target: 'kg-features', value: 10 },
                { source: 'dymesty', target: 'kg-translation', value: 9 },
                { source: 'dymesty', target: 'kg-privacy', value: 9 },
                { source: 'dymesty', target: 'kg-battery', value: 8 },
                { source: 'dymesty', target: 'kg-price', value: 7 },
                { source: 'dymesty', target: 'kg-ai-assistant', value: 8 },
                { source: 'dymesty', target: 'kg-titanium', value: 7 },

                // Direct Schema to Knowledge Graph connections
                { source: 'schema-product', target: 'kg-features', value: 8, lineStyle: { type: 'dashed' } },
                { source: 'schema-faq', target: 'kg-translation', value: 9, lineStyle: { type: 'dashed' } },
                { source: 'schema-faq', target: 'kg-privacy', value: 9, lineStyle: { type: 'dashed' } },
                { source: 'schema-faq', target: 'kg-battery', value: 8, lineStyle: { type: 'dashed' } },
                { source: 'schema-review', target: 'kg-price', value: 7, lineStyle: { type: 'dashed' } },

                // Knowledge Graph to AI Platforms
                { source: 'kg-features', target: 'ai-chatgpt', value: 6 },
                { source: 'kg-features', target: 'ai-perplexity', value: 7 },
                { source: 'kg-translation', target: 'ai-claude', value: 8 },
                { source: 'kg-privacy', target: 'ai-gemini', value: 7 }
            ];

            const categories = [
                { name: 'Core Entity', itemStyle: { color: '#667eea' } },
                { name: 'JSON-LD Schemas', itemStyle: { color: '#3b82f6' } },
                { name: 'Knowledge Graph', itemStyle: { color: '#10b981' } },
                { name: 'AI Platforms', itemStyle: { color: '#f59e0b' } }
            ];

            const option = {
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        if (params.dataType === 'node') {
                            return `<b>${params.name}</b><br/>Category: ${categories[params.data.category].name}`;
                        } else {
                            return `${params.data.source} → ${params.data.target}<br/>Strength: ${params.data.value}/10`;
                        }
                    }
                },
                legend: {
                    data: categories.map(c => c.name),
                    bottom: 10,
                    textStyle: { color: '#64748b' }
                },
                animationDuration: 1500,
                series: [{
                    type: 'graph',
                    layout: 'none',
                    data: nodes,
                    edges: edges,
                    categories: categories,
                    roam: true,
                    focusNodeAdjacency: true,
                    itemStyle: {
                        borderColor: '#fff',
                        borderWidth: 2,
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.3)'
                    },
                    label: {
                        show: true,
                        position: 'bottom',
                        color: '#334155',
                        fontSize: 12
                    },
                    lineStyle: {
                        color: 'source',
                        curveness: 0.3,
                        opacity: 0.7,
                        width: 2
                    },
                    emphasis: {
                        focus: 'adjacency',
                        itemStyle: {
                            borderWidth: 4
                        },
                        lineStyle: {
                            width: 4,
                            opacity: 1
                        }
                    }
                }]
            };

            mainGraphChart.setOption(option);
        }

        // Initialize schema coverage chart
        function initSchemaCoverage() {
            const chartDom = document.getElementById('schemaCoverageChart');
            coverageChart = echarts.init(chartDom);

            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'cross' }
                },
                legend: {
                    data: ['Product Schema', 'FAQ Schema', 'HowTo Schema', 'Review Schema'],
                    bottom: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '15%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['ChatGPT', 'Perplexity', 'Claude', 'Gemini', 'You.com', 'Bing Chat'],
                    axisLabel: { rotate: 45 }
                },
                yAxis: {
                    type: 'value',
                    name: 'Recognition Rate (%)',
                    min: 0,
                    max: 100
                },
                series: [
                    {
                        name: 'Product Schema',
                        type: 'line',
                        data: [95, 92, 94, 88, 85, 90],
                        smooth: true,
                        symbolSize: 8,
                        itemStyle: { color: '#667eea' }
                    },
                    {
                        name: 'FAQ Schema',
                        type: 'line',
                        data: [88, 90, 92, 85, 82, 87],
                        smooth: true,
                        symbolSize: 8,
                        itemStyle: { color: '#10b981' }
                    },
                    {
                        name: 'HowTo Schema',
                        type: 'line',
                        data: [75, 78, 80, 72, 70, 76],
                        smooth: true,
                        symbolSize: 8,
                        itemStyle: { color: '#f59e0b' }
                    },
                    {
                        name: 'Review Schema',
                        type: 'line',
                        data: [82, 85, 87, 80, 78, 83],
                        smooth: true,
                        symbolSize: 8,
                        itemStyle: { color: '#ef4444' }
                    }
                ]
            };

            coverageChart.setOption(option);
        }

        // Initialize connection strength heatmap
        function initConnectionHeatmap() {
            const chartDom = document.getElementById('connectionHeatmapChart');
            heatmapChart = echarts.init(chartDom);

            const schemas = ['Product', 'FAQPage', 'HowTo', 'Review', 'Organization'];
            const nodes = ['Features', 'Translation', 'Privacy', 'Battery', 'Price', 'AI Assistant'];
            
            const data = [];
            for (let i = 0; i < schemas.length; i++) {
                for (let j = 0; j < nodes.length; j++) {
                    // Generate realistic connection strengths
                    let value = Math.random() * 50 + 50;
                    if ((i === 0 && j === 0) || (i === 1 && j <= 3)) value = Math.random() * 20 + 80;
                    data.push([j, i, Math.round(value)]);
                }
            }

            const option = {
                tooltip: {
                    position: 'top',
                    formatter: function(params) {
                        return `${schemas[params.data[1]]} → ${nodes[params.data[0]]}<br/>Strength: ${params.data[2]}%`;
                    }
                },
                grid: {
                    height: '70%',
                    top: '10%'
                },
                xAxis: {
                    type: 'category',
                    data: nodes,
                    splitArea: { show: true }
                },
                yAxis: {
                    type: 'category',
                    data: schemas,
                    splitArea: { show: true }
                },
                visualMap: {
                    min: 0,
                    max: 100,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%',
                    inRange: {
                        color: ['#fee2e2', '#fbbf24', '#34d399', '#3b82f6', '#667eea']
                    }
                },
                series: [{
                    name: 'Connection Strength',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            heatmapChart.setOption(option);
        }

        // Initialize impact analysis chart
        function initImpactAnalysis() {
            const chartDom = document.getElementById('impactAnalysisChart');
            impactChart = echarts.init(chartDom);

            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'shadow' }
                },
                legend: {
                    data: ['Before Schema', 'After Schema', 'Improvement'],
                    bottom: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '15%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Visibility', 'Accuracy', 'Citations', 'Featured Snippets', 'Voice Results']
                },
                yAxis: [
                    {
                        type: 'value',
                        name: 'Score',
                        min: 0,
                        max: 100
                    },
                    {
                        type: 'value',
                        name: 'Improvement %',
                        min: 0,
                        max: 100
                    }
                ],
                series: [
                    {
                        name: 'Before Schema',
                        type: 'bar',
                        data: [45, 52, 38, 25, 30],
                        itemStyle: { color: '#e2e8f0' }
                    },
                    {
                        name: 'After Schema',
                        type: 'bar',
                        data: [78, 85, 72, 65, 68],
                        itemStyle: { color: '#667eea' }
                    },
                    {
                        name: 'Improvement',
                        type: 'line',
                        yAxisIndex: 1,
                        data: [73, 63, 89, 160, 127],
                        itemStyle: { color: '#10b981' },
                        symbolSize: 8,
                        label: {
                            show: true,
                            formatter: '{c}%',
                            color: '#10b981'
                        }
                    }
                ]
            };

            impactChart.setOption(option);
        }

        // Initialize priority matrix chart
        function initPriorityMatrix() {
            const chartDom = document.getElementById('priorityMatrixChart');
            priorityChart = echarts.init(chartDom);

            const schemaItems = [
                { name: 'Product.aggregateRating', impact: 85, effort: 20, size: 100 },
                { name: 'FAQPage - Translation', impact: 90, effort: 30, size: 120 },
                { name: 'FAQPage - Privacy', impact: 88, effort: 25, size: 110 },
                { name: 'HowTo - Setup Guide', impact: 70, effort: 45, size: 80 },
                { name: 'Review Integration', impact: 75, effort: 60, size: 90 },
                { name: 'VideoObject', impact: 65, effort: 70, size: 70 },
                { name: 'Organization', impact: 55, effort: 15, size: 60 },
                { name: 'BreadcrumbList', impact: 45, effort: 10, size: 50 },
                { name: 'FAQPage - Battery Life', impact: 82, effort: 28, size: 95 },
                { name: 'Product.offers', impact: 78, effort: 35, size: 85 }
            ];

            const option = {
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        return `<b>${params.data.name}</b><br/>
                                Impact: ${params.data.impact}%<br/>
                                Implementation Effort: ${params.data.effort}%<br/>
                                Priority Score: ${params.data.size}`;
                    }
                },
                grid: {
                    left: '3%',
                    right: '7%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    name: 'Implementation Effort',
                    nameLocation: 'middle',
                    nameGap: 30,
                    min: 0,
                    max: 100,
                    splitLine: { lineStyle: { type: 'dashed' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'Business Impact',
                    nameLocation: 'middle',
                    nameGap: 30,
                    min: 0,
                    max: 100,
                    splitLine: { lineStyle: { type: 'dashed' } }
                },
                series: [{
                    type: 'scatter',
                    data: schemaItems.map(item => ({
                        value: [item.effort, item.impact],
                        name: item.name,
                        size: item.size,
                        impact: item.impact,
                        effort: item.effort
                    })),
                    symbolSize: function(data) {
                        return data.size / 2;
                    },
                    itemStyle: {
                        color: function(params) {
                            // Color based on quadrant
                            if (params.data.impact >= 75 && params.data.effort <= 40) return '#10b981'; // High impact, low effort
                            if (params.data.impact >= 75 && params.data.effort > 40) return '#f59e0b'; // High impact, high effort
                            if (params.data.impact < 75 && params.data.effort <= 40) return '#3b82f6'; // Low impact, low effort
                            return '#ef4444'; // Low impact, high effort
                        },
                        opacity: 0.8
                    },
                    label: {
                        show: true,
                        formatter: function(params) {
                            return params.data.name;
                        },
                        position: 'top',
                        fontSize: 10
                    },
                    emphasis: {
                        scale: 1.5,
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            priorityChart.setOption(option);
        }

        // Update functions
        function updateSchemaView(view) {
            currentSchemaView = view;
            document.querySelectorAll('.control-btn').forEach(btn => {
                if (btn.textContent.toLowerCase().includes(view) || (view === 'all' && btn.textContent === 'All Schemas')) {
                    btn.classList.add('active');
                } else if (btn.parentElement.querySelector('.control-label').textContent.includes('Schema Focus')) {
                    btn.classList.remove('active');
                }
            });
            // Update charts based on selected schema
            console.log('Updating to schema view:', view);
        }

        function updateTimeRange(range) {
            currentTimeRange = range;
            document.querySelectorAll('.control-btn').forEach(btn => {
                if (btn.textContent.includes(range === 'week' ? '7 Days' : range === 'month' ? '30 Days' : '90 Days')) {
                    btn.classList.add('active');
                } else if (btn.parentElement.querySelector('.control-label').textContent.includes('Time Range')) {
                    btn.classList.remove('active');
                }
            });
            // Update charts based on selected time range
            console.log('Updating to time range:', range);
        }

        // Initialize all charts
        window.onload = function() {
            initMainGraph();
            initSchemaCoverage();
            initConnectionHeatmap();
            initImpactAnalysis();
            initPriorityMatrix();
        };

        // Handle window resize
        window.addEventListener('resize', () => {
            mainGraphChart && mainGraphChart.resize();
            coverageChart && coverageChart.resize();
            heatmapChart && heatmapChart.resize();
            impactChart && impactChart.resize();
            priorityChart && priorityChart.resize();
        });
    </script>
</body>
</html>