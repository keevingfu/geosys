<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - SweetNightGEO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="shared-ui-components.css">
    <script src="shared-components.js"></script>
    <script>
        // Authentication check
        (function() {
            const authToken = localStorage.getItem('authToken');
            const sessionExpiry = localStorage.getItem('sessionExpiry');
            
            if (!authToken || !sessionExpiry || new Date().getTime() > parseInt(sessionExpiry)) {
                localStorage.removeItem('authToken');
                localStorage.removeItem('sessionExpiry');
                localStorage.removeItem('currentUser');
                window.location.href = 'login.html';
            }
        })();
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header header-fixed">
        <div class="logo">
            <i class="fas fa-code"></i>
            API Documentation
        </div>
        <div class="header-right">
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <span id="current-user">Admin User</span>
            </div>
            <button class="logout-btn" onclick="AuthManager.logout()">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="content-area">
        <div class="api-doc-layout">
            <!-- Sidebar Navigation -->
            <aside class="api-sidebar">
                <div class="api-sidebar-header">
                    <h3>API Reference</h3>
                    <button class="btn btn-sm btn-primary" onclick="generateApiKey()">
                        <i class="fas fa-key"></i>
                        Get API Key
                    </button>
                </div>
                
                <div class="api-search">
                    <input type="text" id="api-search" placeholder="Search APIs..." class="form-input">
                    <i class="fas fa-search"></i>
                </div>

                <nav class="api-nav">
                    <div class="api-nav-section">
                        <h4>Getting Started</h4>
                        <ul>
                            <li><a href="#introduction" onclick="showSection('introduction')">Introduction</a></li>
                            <li><a href="#authentication" onclick="showSection('authentication')">Authentication</a></li>
                            <li><a href="#rate-limits" onclick="showSection('rate-limits')">Rate Limits</a></li>
                            <li><a href="#errors" onclick="showSection('errors')">Error Handling</a></li>
                        </ul>
                    </div>

                    <div class="api-nav-section">
                        <h4>Endpoints</h4>
                        <ul>
                            <li><a href="#users" onclick="showSection('users')">Users API</a></li>
                            <li><a href="#analytics" onclick="showSection('analytics')">Analytics API</a></li>
                            <li><a href="#content" onclick="showSection('content')">Content API</a></li>
                            <li><a href="#monitoring" onclick="showSection('monitoring')">Monitoring API</a></li>
                            <li><a href="#reports" onclick="showSection('reports')">Reports API</a></li>
                        </ul>
                    </div>

                    <div class="api-nav-section">
                        <h4>SDKs & Tools</h4>
                        <ul>
                            <li><a href="#javascript-sdk" onclick="showSection('javascript-sdk')">JavaScript SDK</a></li>
                            <li><a href="#python-sdk" onclick="showSection('python-sdk')">Python SDK</a></li>
                            <li><a href="#postman" onclick="showSection('postman')">Postman Collection</a></li>
                            <li><a href="#webhooks" onclick="showSection('webhooks')">Webhooks</a></li>
                        </ul>
                    </div>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="api-content">
                <!-- Introduction Section -->
                <section id="introduction" class="api-section active">
                    <div class="api-header">
                        <h1>SweetNight GEO API Documentation</h1>
                        <p class="api-subtitle">RESTful API for content intelligence and analytics</p>
                    </div>

                    <div class="api-overview">
                        <div class="overview-stats">
                            <div class="stat-box">
                                <div class="stat-number">25+</div>
                                <div class="stat-label">API Endpoints</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">99.9%</div>
                                <div class="stat-label">Uptime</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">< 100ms</div>
                                <div class="stat-label">Response Time</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number">24/7</div>
                                <div class="stat-label">Support</div>
                            </div>
                        </div>

                        <div class="quick-start">
                            <h3>Quick Start</h3>
                            <div class="code-example">
                                <div class="code-header">
                                    <span>Base URL</span>
                                    <button class="copy-btn" onclick="copyToClipboard('https://api.sweetnightgeo.com/v1')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre><code>https://api.sweetnightgeo.com/v1</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Authentication Section -->
                <section id="authentication" class="api-section">
                    <h2>Authentication</h2>
                    <p>The SweetNight GEO API uses API keys for authentication. Include your API key in the Authorization header of all requests.</p>
                    
                    <div class="auth-methods">
                        <h3>API Key Authentication</h3>
                        <div class="code-example">
                            <div class="code-tabs">
                                <button class="code-tab active" onclick="showCodeTab('curl')">cURL</button>
                                <button class="code-tab" onclick="showCodeTab('javascript')">JavaScript</button>
                                <button class="code-tab" onclick="showCodeTab('python')">Python</button>
                            </div>
                            
                            <div class="code-content curl-code active">
                                <pre><code>curl -X GET "https://api.sweetnightgeo.com/v1/users" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"</code></pre>
                            </div>
                            
                            <div class="code-content javascript-code">
                                <pre><code>const response = await fetch('https://api.sweetnightgeo.com/v1/users', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  }
});</code></pre>
                            </div>
                            
                            <div class="code-content python-code">
                                <pre><code>import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

response = requests.get('https://api.sweetnightgeo.com/v1/users', headers=headers)</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Users API Section -->
                <section id="users" class="api-section">
                    <h2>Users API</h2>
                    <p>Manage user accounts and permissions through the Users API.</p>
                    
                    <div class="endpoint-list">
                        <div class="endpoint-item">
                            <div class="endpoint-header">
                                <div class="endpoint-method get">GET</div>
                                <div class="endpoint-path">/users</div>
                                <div class="endpoint-title">List Users</div>
                            </div>
                            <div class="endpoint-content">
                                <p>Retrieve a list of all users with pagination support.</p>
                                
                                <div class="endpoint-params">
                                    <h4>Query Parameters</h4>
                                    <table class="params-table">
                                        <tr>
                                            <td><code>page</code></td>
                                            <td>integer</td>
                                            <td>Page number (default: 1)</td>
                                        </tr>
                                        <tr>
                                            <td><code>limit</code></td>
                                            <td>integer</td>
                                            <td>Items per page (default: 20, max: 100)</td>
                                        </tr>
                                        <tr>
                                            <td><code>role</code></td>
                                            <td>string</td>
                                            <td>Filter by user role</td>
                                        </tr>
                                    </table>
                                </div>

                                <div class="endpoint-response">
                                    <h4>Response</h4>
                                    <div class="code-example">
                                        <pre><code>{
  "data": [
    {
      "id": 1,
      "name": "John Doe",
      "email": "john@example.com",
      "role": "admin",
      "created_at": "2024-01-15T10:30:00Z"
    }
  ],
  "meta": {
    "total": 147,
    "page": 1,
    "limit": 20,
    "pages": 8
  }
}</code></pre>
                                    </div>
                                </div>

                                <div class="try-it-section">
                                    <button class="btn btn-primary" onclick="tryEndpoint('/users', 'GET')">
                                        <i class="fas fa-play"></i>
                                        Try It
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="endpoint-item">
                            <div class="endpoint-header">
                                <div class="endpoint-method post">POST</div>
                                <div class="endpoint-path">/users</div>
                                <div class="endpoint-title">Create User</div>
                            </div>
                            <div class="endpoint-content">
                                <p>Create a new user account.</p>
                                
                                <div class="endpoint-body">
                                    <h4>Request Body</h4>
                                    <div class="code-example">
                                        <pre><code>{
  "name": "Jane Smith",
  "email": "jane@example.com",
  "role": "user",
  "password": "secure_password"
}</code></pre>
                                    </div>
                                </div>

                                <div class="try-it-section">
                                    <button class="btn btn-primary" onclick="tryEndpoint('/users', 'POST')">
                                        <i class="fas fa-play"></i>
                                        Try It
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="endpoint-item">
                            <div class="endpoint-header">
                                <div class="endpoint-method get">GET</div>
                                <div class="endpoint-path">/users/{id}</div>
                                <div class="endpoint-title">Get User</div>
                            </div>
                            <div class="endpoint-content">
                                <p>Retrieve a specific user by ID.</p>

                                <div class="try-it-section">
                                    <button class="btn btn-primary" onclick="tryEndpoint('/users/{id}', 'GET')">
                                        <i class="fas fa-play"></i>
                                        Try It
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Analytics API Section -->
                <section id="analytics" class="api-section">
                    <h2>Analytics API</h2>
                    <p>Access analytics data and metrics through the Analytics API.</p>
                    
                    <div class="endpoint-list">
                        <div class="endpoint-item">
                            <div class="endpoint-header">
                                <div class="endpoint-method get">GET</div>
                                <div class="endpoint-path">/analytics/overview</div>
                                <div class="endpoint-title">Get Analytics Overview</div>
                            </div>
                            <div class="endpoint-content">
                                <p>Get high-level analytics metrics and KPIs.</p>

                                <div class="endpoint-response">
                                    <h4>Response</h4>
                                    <div class="code-example">
                                        <pre><code>{
  "users": {
    "total": 1547,
    "active": 1320,
    "new_this_month": 123
  },
  "content": {
    "total_views": 45678,
    "engagement_rate": 0.73,
    "top_performing": [...]
  },
  "performance": {
    "avg_response_time": 89,
    "uptime": 0.999,
    "error_rate": 0.001
  }
}</code></pre>
                                    </div>
                                </div>

                                <div class="try-it-section">
                                    <button class="btn btn-primary" onclick="tryEndpoint('/analytics/overview', 'GET')">
                                        <i class="fas fa-play"></i>
                                        Try It
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Error Handling Section -->
                <section id="errors" class="api-section">
                    <h2>Error Handling</h2>
                    <p>The API uses conventional HTTP response codes to indicate success or failure of requests.</p>
                    
                    <div class="error-codes">
                        <h3>HTTP Status Codes</h3>
                        <table class="error-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Status</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="status-code success">200</span></td>
                                    <td>OK</td>
                                    <td>Request successful</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code success">201</span></td>
                                    <td>Created</td>
                                    <td>Resource created successfully</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code error">400</span></td>
                                    <td>Bad Request</td>
                                    <td>Invalid request parameters</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code error">401</span></td>
                                    <td>Unauthorized</td>
                                    <td>Invalid or missing API key</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code error">404</span></td>
                                    <td>Not Found</td>
                                    <td>Resource not found</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code error">429</span></td>
                                    <td>Too Many Requests</td>
                                    <td>Rate limit exceeded</td>
                                </tr>
                                <tr>
                                    <td><span class="status-code error">500</span></td>
                                    <td>Internal Server Error</td>
                                    <td>Server error occurred</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>Error Response Format</h3>
                        <div class="code-example">
                            <pre><code>{
  "error": {
    "code": "INVALID_PARAMETER",
    "message": "The 'email' parameter is required",
    "details": {
      "field": "email",
      "reason": "missing_required_field"
    }
  }
}</code></pre>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- API Tester Modal -->
    <div id="api-tester-modal" class="modal-overlay" style="display: none;">
        <div class="modal api-tester-modal">
            <div class="modal-header">
                <h3 id="tester-title">API Tester</h3>
                <button class="btn-close" onclick="closeApiTester()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tester-config">
                    <div class="form-group">
                        <label class="form-label">Endpoint</label>
                        <div class="endpoint-input">
                            <span id="tester-method" class="method-badge">GET</span>
                            <input type="text" id="tester-url" class="form-input" readonly>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Headers</label>
                        <textarea id="tester-headers" class="form-textarea" rows="4">{
  "Authorization": "Bearer YOUR_API_KEY",
  "Content-Type": "application/json"
}</textarea>
                    </div>
                    
                    <div class="form-group" id="tester-body-group" style="display: none;">
                        <label class="form-label">Request Body</label>
                        <textarea id="tester-body" class="form-textarea" rows="6">{}</textarea>
                    </div>
                </div>
                
                <div class="tester-response" id="tester-response" style="display: none;">
                    <h4>Response</h4>
                    <div class="response-status">
                        <span id="response-status"></span>
                        <span id="response-time"></span>
                    </div>
                    <pre id="response-body"></pre>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeApiTester()">Cancel</button>
                <button class="btn btn-primary" onclick="executeApiTest()">
                    <i class="fas fa-play"></i>
                    Send Request
                </button>
            </div>
        </div>
    </div>

    <style>
        .api-doc-layout {
            display: flex;
            height: calc(100vh - 70px);
        }

        /* Sidebar */
        .api-sidebar {
            width: 300px;
            background: white;
            border-right: 1px solid var(--border);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .api-sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .api-sidebar-header h3 {
            margin: 0;
            color: var(--dark);
            font-size: 18px;
        }

        .api-search {
            position: relative;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
        }

        .api-search i {
            position: absolute;
            right: 36px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500);
        }

        .api-nav {
            padding: 16px 0;
        }

        .api-nav-section {
            margin-bottom: 24px;
        }

        .api-nav-section h4 {
            padding: 8px 24px;
            margin: 0 0 8px 0;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .api-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .api-nav li {
            margin: 0;
        }

        .api-nav a {
            display: block;
            padding: 8px 24px;
            color: var(--gray-700);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }

        .api-nav a:hover,
        .api-nav a.active {
            background: var(--primary-light);
            color: var(--primary);
        }

        /* Main Content */
        .api-content {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
            background: var(--gray-50);
        }

        .api-section {
            display: none;
            max-width: 800px;
        }

        .api-section.active {
            display: block;
        }

        .api-header h1 {
            font-size: 36px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .api-subtitle {
            font-size: 18px;
            color: var(--gray-600);
            margin-bottom: 32px;
        }

        .api-overview {
            background: white;
            padding: 32px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: 32px;
        }

        .overview-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-box {
            text-align: center;
            padding: 16px;
            border-radius: var(--border-radius);
            background: var(--gradient-light);
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .quick-start h3 {
            margin-bottom: 16px;
            color: var(--dark);
        }

        /* Code Examples */
        .code-example {
            background: var(--dark);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 16px 0;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--gray-800);
            border-bottom: 1px solid var(--gray-600);
            color: var(--gray-300);
            font-size: 12px;
        }

        .copy-btn {
            background: none;
            border: none;
            color: var(--gray-400);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
        }

        .copy-btn:hover {
            color: white;
            background: var(--gray-700);
        }

        .code-example pre {
            margin: 0;
            padding: 16px;
            color: #e2e8f0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
        }

        .code-tabs {
            display: flex;
            background: var(--gray-800);
            border-bottom: 1px solid var(--gray-600);
        }

        .code-tab {
            background: none;
            border: none;
            padding: 12px 16px;
            color: var(--gray-400);
            cursor: pointer;
            font-size: 12px;
            transition: var(--transition);
        }

        .code-tab.active,
        .code-tab:hover {
            color: white;
            background: var(--gray-700);
        }

        .code-content {
            display: none;
        }

        .code-content.active {
            display: block;
        }

        /* Endpoints */
        .endpoint-list {
            space-y: 24px;
        }

        .endpoint-item {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: 24px;
            overflow: hidden;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
        }

        .endpoint-method {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            color: white;
            min-width: 60px;
            text-align: center;
        }

        .endpoint-method.get { background: var(--success); }
        .endpoint-method.post { background: var(--info); }
        .endpoint-method.put { background: var(--warning); }
        .endpoint-method.delete { background: var(--error); }

        .endpoint-path {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 16px;
            color: var(--dark);
            font-weight: 500;
        }

        .endpoint-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }

        .endpoint-content {
            padding: 24px;
        }

        .endpoint-content > p {
            margin-bottom: 24px;
            color: var(--gray-700);
        }

        .endpoint-params h4,
        .endpoint-body h4,
        .endpoint-response h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 12px;
        }

        .params-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 24px;
        }

        .params-table td {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        .params-table td:first-child {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            color: var(--primary);
            font-weight: 500;
            width: 120px;
        }

        .params-table td:nth-child(2) {
            color: var(--gray-600);
            font-style: italic;
            width: 80px;
        }

        .try-it-section {
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        /* Error Codes Table */
        .error-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
        }

        .error-table th,
        .error-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .error-table th {
            background: var(--gray-100);
            font-weight: 600;
            color: var(--dark);
        }

        .status-code {
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            font-weight: 600;
        }

        .status-code.success {
            background: var(--success-light);
            color: var(--success);
        }

        .status-code.error {
            background: var(--error-light);
            color: var(--error);
        }

        /* API Tester Modal */
        .api-tester-modal {
            max-width: 800px;
            width: 90vw;
        }

        .endpoint-input {
            display: flex;
            gap: 8px;
        }

        .method-badge {
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            color: white;
            background: var(--success);
            display: flex;
            align-items: center;
            min-width: 60px;
            justify-content: center;
        }

        .response-status {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            font-size: 14px;
        }

        #response-body {
            background: var(--dark);
            color: #e2e8f0;
            padding: 16px;
            border-radius: var(--border-radius);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            overflow-x: auto;
        }

        @media (max-width: 768px) {
            .api-doc-layout {
                flex-direction: column;
                height: auto;
            }
            
            .api-sidebar {
                width: 100%;
                position: sticky;
                top: 70px;
                z-index: 100;
                max-height: 50vh;
            }
            
            .overview-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .endpoint-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }
    </style>

    <script>
        function initializeApiDocs() {
            // Set current user info
            const currentUser = AuthManager.getCurrentUser();
            if (currentUser) {
                document.getElementById('current-user').textContent = currentUser.name || 'Admin User';
            }

            // Setup search
            document.getElementById('api-search').addEventListener('input', 
                DataUtils.debounce(searchApiDocs, 300));
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.api-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }

            // Update navigation
            document.querySelectorAll('.api-nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`a[href="#${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        function showCodeTab(tabName) {
            const container = event.target.closest('.code-example');
            
            // Update tabs
            container.querySelectorAll('.code-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update content
            container.querySelectorAll('.code-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const targetContent = container.querySelector(`.${tabName}-code`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                UIComponents.showNotification('Copied to clipboard!', 'success');
            }).catch(() => {
                UIComponents.showNotification('Failed to copy', 'error');
            });
        }

        function searchApiDocs() {
            const query = document.getElementById('api-search').value.toLowerCase();
            if (!query) {
                // Show all nav items
                document.querySelectorAll('.api-nav li').forEach(li => {
                    li.style.display = 'block';
                });
                return;
            }

            // Filter nav items
            document.querySelectorAll('.api-nav li').forEach(li => {
                const link = li.querySelector('a');
                const text = link.textContent.toLowerCase();
                li.style.display = text.includes(query) ? 'block' : 'none';
            });
        }

        function generateApiKey() {
            const keyContent = `
                <div class="api-key-generator">
                    <div class="form-group">
                        <label class="form-label">Key Name</label>
                        <input type="text" id="key-name" class="form-input" placeholder="My API Key">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Permissions</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" checked> Read access
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox"> Write access
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox"> Admin access
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Expiration</label>
                        <select class="form-select">
                            <option value="30">30 days</option>
                            <option value="90">90 days</option>
                            <option value="365">1 year</option>
                            <option value="never">Never</option>
                        </select>
                    </div>
                </div>
                <style>
                    .checkbox-group {
                        display: flex;
                        flex-direction: column;
                        gap: 8px;
                        margin-top: 8px;
                    }
                    .checkbox-label {
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        font-size: 14px;
                        cursor: pointer;
                    }
                </style>
            `;

            UIComponents.showModal('Generate API Key', keyContent, {
                confirmText: 'Generate Key',
                onConfirm: () => {
                    const keyName = document.getElementById('key-name').value;
                    const apiKey = 'sng_' + Math.random().toString(36).substr(2, 32);
                    
                    const resultContent = `
                        <div class="api-key-result">
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Important:</strong> Store this key securely. It won't be shown again.
                            </div>
                            <div class="form-group">
                                <label class="form-label">API Key</label>
                                <div class="key-display">
                                    <input type="text" class="form-input" value="${apiKey}" readonly>
                                    <button class="btn btn-ghost" onclick="copyToClipboard('${apiKey}')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <style>
                            .alert {
                                padding: 12px;
                                border-radius: 6px;
                                margin-bottom: 16px;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            }
                            .alert-warning {
                                background: var(--warning-light);
                                color: var(--warning);
                                border: 1px solid var(--warning);
                            }
                            .key-display {
                                display: flex;
                                gap: 8px;
                            }
                            .key-display input {
                                flex: 1;
                                font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
                            }
                        </style>
                    `;

                    UIComponents.showModal('Your API Key', resultContent, {
                        showCancel: false,
                        confirmText: 'Done'
                    });
                }
            });
        }

        function tryEndpoint(endpoint, method) {
            document.getElementById('tester-title').textContent = `Try ${method} ${endpoint}`;
            document.getElementById('tester-method').textContent = method;
            document.getElementById('tester-method').className = `method-badge ${method.toLowerCase()}`;
            document.getElementById('tester-url').value = `https://api.sweetnightgeo.com/v1${endpoint}`;
            
            // Show/hide body section for POST/PUT methods
            const bodyGroup = document.getElementById('tester-body-group');
            if (['POST', 'PUT', 'PATCH'].includes(method)) {
                bodyGroup.style.display = 'block';
                document.getElementById('tester-body').value = JSON.stringify({
                    name: "Example Name",
                    email: "example@domain.com"
                }, null, 2);
            } else {
                bodyGroup.style.display = 'none';
            }

            // Reset response
            document.getElementById('tester-response').style.display = 'none';
            
            // Show modal
            document.getElementById('api-tester-modal').style.display = 'flex';
        }

        function closeApiTester() {
            document.getElementById('api-tester-modal').style.display = 'none';
        }

        function executeApiTest() {
            const method = document.getElementById('tester-method').textContent;
            const url = document.getElementById('tester-url').value;
            const headers = document.getElementById('tester-headers').value;
            const body = document.getElementById('tester-body').value;

            // Show loading
            const responseSection = document.getElementById('tester-response');
            responseSection.style.display = 'block';
            document.getElementById('response-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending request...';
            document.getElementById('response-body').textContent = '';

            // Simulate API call
            setTimeout(() => {
                const mockResponse = {
                    status: method === 'GET' ? 200 : (method === 'POST' ? 201 : 200),
                    time: Math.floor(Math.random() * 200) + 50,
                    data: method === 'GET' ? {
                        data: [
                            {
                                id: 1,
                                name: "John Doe",
                                email: "john@example.com",
                                created_at: "2024-01-15T10:30:00Z"
                            }
                        ],
                        meta: {
                            total: 147,
                            page: 1,
                            limit: 20
                        }
                    } : {
                        id: Math.floor(Math.random() * 1000),
                        name: "Created Resource",
                        created_at: new Date().toISOString()
                    }
                };

                const statusClass = mockResponse.status < 400 ? 'text-success' : 'text-error';
                document.getElementById('response-status').innerHTML = `
                    <span class="${statusClass}">Status: ${mockResponse.status}</span>
                    <span class="text-gray">Time: ${mockResponse.time}ms</span>
                `;
                
                document.getElementById('response-body').textContent = JSON.stringify(mockResponse.data, null, 2);
            }, 1000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApiDocs);
    </script>
</body>
</html>